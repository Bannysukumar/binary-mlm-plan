"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/user/page",{

/***/ "(app-pages-browser)/./src/lib/firebase-services.ts":
/*!**************************************!*\
  !*** ./src/lib/firebase-services.ts ***!
  \**************************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   auditLogService: function() { return /* binding */ auditLogService; },\n/* harmony export */   batchCreateTransactions: function() { return /* binding */ batchCreateTransactions; },\n/* harmony export */   batchUpdateWallets: function() { return /* binding */ batchUpdateWallets; },\n/* harmony export */   binaryTreeService: function() { return /* binding */ binaryTreeService; },\n/* harmony export */   companyService: function() { return /* binding */ companyService; },\n/* harmony export */   incomeTransactionService: function() { return /* binding */ incomeTransactionService; },\n/* harmony export */   mlmConfigService: function() { return /* binding */ mlmConfigService; },\n/* harmony export */   userService: function() { return /* binding */ userService; },\n/* harmony export */   userSettingsService: function() { return /* binding */ userSettingsService; },\n/* harmony export */   walletService: function() { return /* binding */ walletService; },\n/* harmony export */   withdrawalService: function() { return /* binding */ withdrawalService; }\n/* harmony export */ });\n/* harmony import */ var firebase_firestore__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! firebase/firestore */ \"(app-pages-browser)/./node_modules/firebase/firestore/dist/esm/index.esm.js\");\n/* harmony import */ var _firebase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./firebase */ \"(app-pages-browser)/./src/lib/firebase.ts\");\n\n\n// Helper to ensure db is initialized\nfunction ensureDb() {\n    if (!_firebase__WEBPACK_IMPORTED_MODULE_1__.db) {\n        throw new Error(\"Firestore is not initialized. Please refresh the page.\");\n    }\n    return _firebase__WEBPACK_IMPORTED_MODULE_1__.db;\n}\n// ==================== COMPANY SERVICES ====================\nconst companyService = {\n    async create (company) {\n        const firestore = ensureDb();\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(firestore, \"companies\"));\n        const timestamp = firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now();\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(docRef, {\n            ...company,\n            createdAt: timestamp,\n            updatedAt: timestamp\n        });\n        return docRef.id;\n    },\n    async getById (companyId) {\n        const firestore = ensureDb();\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(firestore, \"companies\", companyId);\n        const docSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(docRef);\n        return docSnap.exists() ? docSnap.data() : null;\n    },\n    async update (companyId, data) {\n        const firestore = ensureDb();\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(firestore, \"companies\", companyId);\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(docRef, {\n            ...data,\n            updatedAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n        });\n    },\n    async getAll (filters) {\n        const firestore = ensureDb();\n        const baseFilters = [\n            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"!=\", \"deleted\")\n        ];\n        const constraints = filters ? [\n            ...baseFilters,\n            ...filters\n        ] : baseFilters;\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(firestore, \"companies\"), ...constraints);\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n        return snapshot.docs.map((doc)=>({\n                id: doc.id,\n                ...doc.data()\n            }));\n    },\n    async getWithBillingInfo (companyId) {\n        const company = await this.getById(companyId);\n        if (!company) return null;\n        // Get active subscription\n        const firestore = ensureDb();\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(firestore, \"companies\", companyId, \"subscriptions\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"in\", [\n            \"active\",\n            \"trial\"\n        ]), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"desc\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(1));\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n        const subscription = snapshot.empty ? null : snapshot.docs[0].data();\n        // Get latest invoice\n        const invoiceQuery = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(firestore, \"companies\", companyId, \"invoices\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"desc\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(1));\n        const invoiceSnapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(invoiceQuery);\n        const latestInvoice = invoiceSnapshot.empty ? null : invoiceSnapshot.docs[0].data();\n        return {\n            company,\n            subscription,\n            latestInvoice,\n            billingStatus: (subscription === null || subscription === void 0 ? void 0 : subscription.status) === \"active\" ? \"active\" : \"inactive\"\n        };\n    },\n    async updateBillingStatus (companyId, status) {\n        const firestore = ensureDb();\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(firestore, \"companies\", companyId);\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(docRef, {\n            billingStatus: status,\n            updatedAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n        });\n    }\n};\n// ==================== USER SERVICES ====================\nconst userService = {\n    async create (companyId, user) {\n        const firestore = ensureDb();\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(firestore, \"companies\", companyId, \"users\"));\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(docRef, {\n            ...user,\n            registrationDate: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n        });\n        return docRef.id;\n    },\n    async getById (companyId, userId) {\n        const firestore = ensureDb();\n        // Try direct document ID first\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(firestore, \"companies\", companyId, \"users\", userId);\n        const docSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(docRef);\n        if (docSnap.exists()) {\n            return {\n                id: docSnap.id,\n                ...docSnap.data()\n            };\n        }\n        // If not found, try searching by id field\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(firestore, \"companies\", companyId, \"users\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"id\", \"==\", userId));\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n        if (!snapshot.empty) {\n            const doc = snapshot.docs[0];\n            return {\n                id: doc.id,\n                ...doc.data()\n            };\n        }\n        return null;\n    },\n    async getByEmail (companyId, email) {\n        const firestore = ensureDb();\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(firestore, \"companies\", companyId, \"users\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"email\", \"==\", email));\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n        if (snapshot.empty) return null;\n        const doc = snapshot.docs[0];\n        return {\n            id: doc.id,\n            ...doc.data()\n        };\n    },\n    async update (companyId, userId, data) {\n        const firestore = ensureDb();\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(firestore, \"companies\", companyId, \"users\", userId);\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(docRef, data);\n    },\n    async listByCompany (companyId, filters) {\n        const firestore = ensureDb();\n        const constraints = filters || [];\n        // Only add orderBy if we have filters that require it, or if no filters exist\n        // If filters include sponsorId, we need the index for sponsorId + registrationDate\n        const hasSponsorFilter = constraints.some((c)=>c && c._fieldPath === \"sponsorId\");\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(firestore, \"companies\", companyId, \"users\"), ...constraints, ...hasSponsorFilter ? [\n            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"registrationDate\", \"desc\")\n        ] : []);\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n        return snapshot.docs.map((doc)=>({\n                id: doc.id,\n                ...doc.data()\n            }));\n    },\n    async listByStatus (companyId, status) {\n        return this.listByCompany(companyId, [\n            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", status)\n        ]);\n    },\n    async getTotalCount (companyId) {\n        if (!_firebase__WEBPACK_IMPORTED_MODULE_1__.db) throw new Error(\"Firestore not initialized\");\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(_firebase__WEBPACK_IMPORTED_MODULE_1__.db, \"companies\", companyId, \"users\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"!=\", \"deleted\"));\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n        return snapshot.size;\n    }\n};\nconst userSettingsService = {\n    async get (companyId, userId) {\n        const firestore = ensureDb();\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(firestore, \"companies\", companyId, \"users\", userId, \"settings\", \"main\");\n        const docSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(docRef);\n        if (docSnap.exists()) {\n            const data = docSnap.data();\n            return data;\n        }\n        return null;\n    },\n    async getOrCreateDefault (companyId, userId) {\n        const existing = await this.get(companyId, userId);\n        if (existing) return existing;\n        const defaultSettings = {\n            notifications: {\n                email: true,\n                push: true,\n                sms: false,\n                incomeAlerts: true,\n                withdrawalAlerts: true,\n                teamUpdates: true\n            },\n            security: {\n                twoFactorAuth: false,\n                loginAlerts: true\n            },\n            preferences: {\n                theme: \"system\",\n                language: \"en\",\n                currency: \"USD\",\n                timezone: \"UTC\"\n            },\n            privacy: {\n                profileVisibility: \"public\",\n                showEarnings: true,\n                showTeam: true\n            },\n            updatedAt: new Date()\n        };\n        await this.update(companyId, userId, defaultSettings);\n        return defaultSettings;\n    },\n    async update (companyId, userId, settings) {\n        const firestore = ensureDb();\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(firestore, \"companies\", companyId, \"users\", userId, \"settings\", \"main\");\n        const existing = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(docRef);\n        if (existing.exists()) {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(docRef, {\n                ...settings,\n                updatedAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n            });\n        } else {\n            await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(docRef, {\n                ...settings,\n                updatedAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n            });\n        }\n    }\n};\n// ==================== BINARY TREE SERVICES ====================\nconst binaryTreeService = {\n    async getPosition (companyId, userId) {\n        const firestore = ensureDb();\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(firestore, \"companies\", companyId, \"users\", userId, \"binaryTree\", \"position\");\n        const docSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(docRef);\n        return docSnap.exists() ? docSnap.data() : null;\n    },\n    // Alias for getPosition (for compatibility)\n    async getBinaryPosition (companyId, userId) {\n        return this.getPosition(companyId, userId);\n    },\n    async setPosition (companyId, userId, position) {\n        const firestore = ensureDb();\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(firestore, \"companies\", companyId, \"users\", userId, \"binaryTree\", \"position\");\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(docRef, position);\n    },\n    async updateVolume (companyId, userId, side, volume) {\n        const firestore = ensureDb();\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(firestore, \"companies\", companyId, \"users\", userId, \"binaryTree\", \"position\");\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(docRef, {\n            [\"\".concat(side, \"Volume\")]: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.increment)(volume)\n        });\n    },\n    async getDownline (companyId, sponsorId) {\n        let depth = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 0, maxDepth = arguments.length > 3 && arguments[3] !== void 0 ? arguments[3] : 10;\n        if (depth > maxDepth) return [];\n        const users = await userService.listByCompany(companyId, [\n            (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"sponsorId\", \"==\", sponsorId)\n        ]);\n        let downline = users.map((u)=>u.id);\n        for (const user of users){\n            const subDownline = await this.getDownline(companyId, user.id, depth + 1, maxDepth);\n            downline = [\n                ...downline,\n                ...subDownline\n            ];\n        }\n        return downline;\n    },\n    // Get team count (left, right, total)\n    async getTeamCount (companyId, userId) {\n        try {\n            const firestore = ensureDb();\n            // Query without orderBy to avoid index requirement - we just need to count\n            const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(firestore, \"companies\", companyId, \"users\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"sponsorId\", \"==\", userId));\n            const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n            let leftCount = 0;\n            let rightCount = 0;\n            snapshot.docs.forEach((docSnap)=>{\n                const user = docSnap.data();\n                if (user.placementSide === \"left\") leftCount++;\n                else if (user.placementSide === \"right\") rightCount++;\n            });\n            return {\n                total: snapshot.size,\n                left: leftCount,\n                right: rightCount\n            };\n        } catch (error) {\n            console.error(\"[v0] Error getting team count:\", error);\n            return {\n                total: 0,\n                left: 0,\n                right: 0\n            };\n        }\n    },\n    // Calculate team volume recursively\n    async calculateTeamVolume (companyId, userId) {\n        try {\n            const position = await this.getPosition(companyId, userId);\n            if (!position) return 0;\n            let volume = (position.leftVolume || 0) + (position.rightVolume || 0);\n            // Recursively add children volumes\n            if (position.left) {\n                volume += await this.calculateTeamVolume(companyId, position.left);\n            }\n            if (position.right) {\n                volume += await this.calculateTeamVolume(companyId, position.right);\n            }\n            return volume;\n        } catch (error) {\n            console.error(\"[v0] Error calculating team volume:\", error);\n            return 0;\n        }\n    }\n};\n// ==================== WALLET SERVICES ====================\nconst walletService = {\n    async getOrCreate (companyId, userId) {\n        const firestore = ensureDb();\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(firestore, \"companies\", companyId, \"users\", userId, \"wallet\", \"main\");\n        const docSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(docRef);\n        if (docSnap.exists()) {\n            return docSnap.data();\n        }\n        const newWallet = {\n            userId,\n            companyId,\n            availableBalance: 0,\n            lockedBalance: 0,\n            totalWithdrawn: 0,\n            totalEarned: 0,\n            lastUpdated: new Date()\n        };\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(docRef, newWallet);\n        return newWallet;\n    },\n    async getBalance (companyId, userId) {\n        const wallet = await this.getOrCreate(companyId, userId);\n        return {\n            available: wallet.availableBalance,\n            locked: wallet.lockedBalance,\n            total: wallet.availableBalance + wallet.lockedBalance,\n            withdrawn: wallet.totalWithdrawn,\n            earned: wallet.totalEarned\n        };\n    },\n    async addIncome (companyId, userId, amount) {\n        const firestore = ensureDb();\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(firestore, \"companies\", companyId, \"users\", userId, \"wallet\", \"main\");\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(docRef, {\n            availableBalance: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.increment)(amount),\n            totalEarned: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.increment)(amount),\n            lastUpdated: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n        });\n    },\n    async deductBalance (companyId, userId, amount) {\n        const firestore = ensureDb();\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(firestore, \"companies\", companyId, \"users\", userId, \"wallet\", \"main\");\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(docRef, {\n            availableBalance: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.increment)(-amount),\n            lastUpdated: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n        });\n    },\n    async recordWithdrawal (companyId, userId, amount) {\n        const firestore = ensureDb();\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(firestore, \"companies\", companyId, \"users\", userId, \"wallet\", \"main\");\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(docRef, {\n            availableBalance: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.increment)(-amount),\n            totalWithdrawn: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.increment)(amount),\n            lastUpdated: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n        });\n    }\n};\n// ==================== INCOME TRANSACTION SERVICES ====================\nconst incomeTransactionService = {\n    async create (companyId, transaction) {\n        const firestore = ensureDb();\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(firestore, \"companies\", companyId, \"incomeTransactions\"));\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(docRef, {\n            ...transaction,\n            createdAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n        });\n        return docRef.id;\n    },\n    async getByUser (companyId, userId) {\n        let limitCount = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 100;\n        const firestore = ensureDb();\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(firestore, \"companies\", companyId, \"incomeTransactions\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", userId), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"desc\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(limitCount));\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n        return snapshot.docs.map((doc)=>({\n                id: doc.id,\n                ...doc.data()\n            }));\n    },\n    async getByType (companyId, incomeType) {\n        let limitCount = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 100;\n        const firestore = ensureDb();\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(firestore, \"companies\", companyId, \"incomeTransactions\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"incomeType\", \"==\", incomeType), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"createdAt\", \"desc\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(limitCount));\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n        return snapshot.docs.map((doc)=>({\n                id: doc.id,\n                ...doc.data()\n            }));\n    },\n    async getTotalByType (companyId, userId, incomeType) {\n        const transactions = await this.getByUser(companyId, userId, 1000);\n        return transactions.filter((t)=>t.incomeType === incomeType && t.status === \"credited\").reduce((sum, t)=>sum + t.amount, 0);\n    }\n};\n// ==================== WITHDRAWAL SERVICES ====================\nconst withdrawalService = {\n    async create (companyId, withdrawal) {\n        const firestore = ensureDb();\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(firestore, \"companies\", companyId, \"withdrawals\"));\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(docRef, {\n            ...withdrawal,\n            requestedAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n        });\n        return docRef.id;\n    },\n    async getById (companyId, withdrawalId) {\n        const firestore = ensureDb();\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(firestore, \"companies\", companyId, \"withdrawals\", withdrawalId);\n        const docSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(docRef);\n        return docSnap.exists() ? docSnap.data() : null;\n    },\n    async update (companyId, withdrawalId, data) {\n        const firestore = ensureDb();\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(firestore, \"companies\", companyId, \"withdrawals\", withdrawalId);\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(docRef, data);\n    },\n    async listByUser (companyId, userId) {\n        const firestore = ensureDb();\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(firestore, \"companies\", companyId, \"withdrawals\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"userId\", \"==\", userId), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"requestedAt\", \"desc\"));\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n        return snapshot.docs.map((doc)=>({\n                id: doc.id,\n                ...doc.data()\n            }));\n    },\n    async listByStatus (companyId, status) {\n        const firestore = ensureDb();\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(firestore, \"companies\", companyId, \"withdrawals\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"status\", \"==\", status), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"requestedAt\", \"desc\"));\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n        return snapshot.docs.map((doc)=>({\n                id: doc.id,\n                ...doc.data()\n            }));\n    },\n    async getSettings (companyId) {\n        const firestore = ensureDb();\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(firestore, \"companies\", companyId, \"settings\", \"withdrawal\");\n        const docSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(docRef);\n        return docSnap.exists() ? docSnap.data() : null;\n    }\n};\n// ==================== MLM CONFIG SERVICES ====================\nconst mlmConfigService = {\n    async get (companyId) {\n        const firestore = ensureDb();\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(firestore, \"companies\", companyId, \"mlmConfig\", \"main\");\n        const docSnap = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDoc)(docRef);\n        return docSnap.exists() ? docSnap.data() : null;\n    },\n    async create (companyId, config) {\n        const firestore = ensureDb();\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(firestore, \"companies\", companyId, \"mlmConfig\", \"main\");\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(docRef, {\n            ...config,\n            companyId\n        });\n    },\n    async update (companyId, data) {\n        const firestore = ensureDb();\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(firestore, \"companies\", companyId, \"mlmConfig\", \"main\");\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.updateDoc)(docRef, data);\n    }\n};\n// ==================== AUDIT LOG SERVICES ====================\nconst auditLogService = {\n    async log (companyId, log) {\n        const firestore = ensureDb();\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(firestore, \"companies\", companyId, \"auditLogs\"));\n        await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.setDoc)(docRef, {\n            ...log,\n            timestamp: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n        });\n    },\n    async listByAdmin (companyId, adminId) {\n        let limitCount = arguments.length > 2 && arguments[2] !== void 0 ? arguments[2] : 100;\n        const firestore = ensureDb();\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(firestore, \"companies\", companyId, \"auditLogs\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.where)(\"adminId\", \"==\", adminId), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"timestamp\", \"desc\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(limitCount));\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n        return snapshot.docs.map((doc)=>({\n                id: doc.id,\n                ...doc.data()\n            }));\n    },\n    async listAll (companyId) {\n        let limitCount = arguments.length > 1 && arguments[1] !== void 0 ? arguments[1] : 100;\n        const firestore = ensureDb();\n        const q = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.query)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(firestore, \"companies\", companyId, \"auditLogs\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.orderBy)(\"timestamp\", \"desc\"), (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.limit)(limitCount));\n        const snapshot = await (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.getDocs)(q);\n        return snapshot.docs.map((doc)=>({\n                id: doc.id,\n                ...doc.data()\n            }));\n    }\n};\n// ==================== BATCH OPERATIONS ====================\nasync function batchUpdateWallets(companyId, updates) {\n    const firestore = ensureDb();\n    const batchWrite = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(firestore);\n    for (const update of updates){\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)(firestore, \"companies\", companyId, \"users\", update.userId, \"wallet\", \"main\");\n        const increment_val = update.type === \"add\" ? update.amount : -update.amount;\n        batchWrite.update(docRef, {\n            availableBalance: (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.increment)(increment_val),\n            lastUpdated: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n        });\n    }\n    await batchWrite.commit();\n}\nasync function batchCreateTransactions(companyId, transactions) {\n    const firestore = ensureDb();\n    const batchWrite = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.writeBatch)(firestore);\n    for (const transaction of transactions){\n        const docRef = (0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.doc)((0,firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.collection)(firestore, \"companies\", companyId, \"incomeTransactions\"));\n        batchWrite.set(docRef, {\n            ...transaction,\n            createdAt: firebase_firestore__WEBPACK_IMPORTED_MODULE_0__.Timestamp.now()\n        });\n    }\n    await batchWrite.commit();\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwcC1wYWdlcy1icm93c2VyKS8uL3NyYy9saWIvZmlyZWJhc2Utc2VydmljZXMudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQWUyQjtBQUNXO0FBRXRDLHFDQUFxQztBQUNyQyxTQUFTYztJQUNQLElBQUksQ0FBQ0QseUNBQUVBLEVBQUU7UUFDUCxNQUFNLElBQUlFLE1BQU07SUFDbEI7SUFDQSxPQUFPRix5Q0FBRUE7QUFDWDtBQWFBLDZEQUE2RDtBQUN0RCxNQUFNRyxpQkFBaUI7SUFDNUIsTUFBTUMsUUFBT0MsT0FBd0Q7UUFDbkUsTUFBTUMsWUFBWUw7UUFDbEIsTUFBTU0sU0FBU25CLHVEQUFHQSxDQUFDRCw4REFBVUEsQ0FBQ21CLFdBQVc7UUFDekMsTUFBTUUsWUFBWVYseURBQVNBLENBQUNXLEdBQUc7UUFDL0IsTUFBTWxCLDBEQUFNQSxDQUFDZ0IsUUFBUTtZQUNuQixHQUFHRixPQUFPO1lBQ1ZLLFdBQVdGO1lBQ1hHLFdBQVdIO1FBQ2I7UUFDQSxPQUFPRCxPQUFPSyxFQUFFO0lBQ2xCO0lBRUEsTUFBTUMsU0FBUUMsU0FBaUI7UUFDN0IsTUFBTVIsWUFBWUw7UUFDbEIsTUFBTU0sU0FBU25CLHVEQUFHQSxDQUFDa0IsV0FBVyxhQUFhUTtRQUMzQyxNQUFNQyxVQUFVLE1BQU0xQiwwREFBTUEsQ0FBQ2tCO1FBQzdCLE9BQU9RLFFBQVFDLE1BQU0sS0FBTUQsUUFBUUUsSUFBSSxLQUFpQjtJQUMxRDtJQUVBLE1BQU1DLFFBQU9KLFNBQWlCLEVBQUVHLElBQXNCO1FBQ3BELE1BQU1YLFlBQVlMO1FBQ2xCLE1BQU1NLFNBQVNuQix1REFBR0EsQ0FBQ2tCLFdBQVcsYUFBYVE7UUFDM0MsTUFBTXRCLDZEQUFTQSxDQUFDZSxRQUFRO1lBQ3RCLEdBQUdVLElBQUk7WUFDUE4sV0FBV2IseURBQVNBLENBQUNXLEdBQUc7UUFDMUI7SUFDRjtJQUVBLE1BQU1VLFFBQU9DLE9BQTJCO1FBQ3RDLE1BQU1kLFlBQVlMO1FBQ2xCLE1BQU1vQixjQUFj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SSxTQUFpQixFQUNqQnNJLE9BQTBFO0lBRTFFLE1BQU05SSxZQUFZTDtJQUNsQixNQUFNb0osYUFBYXhKLDhEQUFVQSxDQUFDUztJQUU5QixLQUFLLE1BQU1ZLFVBQVVrSSxRQUFTO1FBQzVCLE1BQU03SSxTQUFTbkIsdURBQUdBLENBQUNrQixXQUFXLGFBQWFRLFdBQVcsU0FBU0ksT0FBT3FCLE1BQU0sRUFBRSxVQUFVO1FBQ3hGLE1BQU0rRyxnQkFBZ0JwSSxPQUFPcUksSUFBSSxLQUFLLFFBQVFySSxPQUFPcUcsTUFBTSxHQUFHLENBQUNyRyxPQUFPcUcsTUFBTTtRQUM1RThCLFdBQVduSSxNQUFNLENBQUNYLFFBQVE7WUFDeEJvRyxrQkFBa0I1Ryw2REFBU0EsQ0FBQ3VKO1lBQzVCdkMsYUFBYWpILHlEQUFTQSxDQUFDVyxHQUFHO1FBQzVCO0lBQ0Y7SUFFQSxNQUFNNEksV0FBV0csTUFBTTtBQUN6QjtBQUVPLGVBQWVDLHdCQUNwQjNJLFNBQWlCLEVBQ2pCbUgsWUFBZ0U7SUFFaEUsTUFBTTNILFlBQVlMO0lBQ2xCLE1BQU1vSixhQUFheEosOERBQVVBLENBQUNTO0lBRTlCLEtBQUssTUFBTXFILGVBQWVNLGFBQWM7UUFDdEMsTUFBTTFILFNBQVNuQix1REFBR0EsQ0FBQ0QsOERBQVVBLENBQUNtQixXQUFXLGFBQWFRLFdBQVc7UUFDakV1SSxXQUFXSyxHQUFHLENBQUNuSixRQUFRO1lBQ3JCLEdBQUdvSCxXQUFXO1lBQ2RqSCxXQUFXWix5REFBU0EsQ0FBQ1csR0FBRztRQUMxQjtJQUNGO0lBRUEsTUFBTTRJLFdBQVdHLE1BQU07QUFDekIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9fTl9FLy4vc3JjL2xpYi9maXJlYmFzZS1zZXJ2aWNlcy50cz8yYjJlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIGNvbGxlY3Rpb24sXG4gIGRvYyxcbiAgZ2V0RG9jLFxuICBnZXREb2NzLFxuICBzZXREb2MsXG4gIHVwZGF0ZURvYyxcbiAgcXVlcnksXG4gIHdoZXJlLFxuICBvcmRlckJ5LFxuICBsaW1pdCxcbiAgdHlwZSBRdWVyeUNvbnN0cmFpbnQsXG4gIHdyaXRlQmF0Y2gsXG4gIFRpbWVzdGFtcCxcbiAgaW5jcmVtZW50LFxufSBmcm9tIFwiZmlyZWJhc2UvZmlyZXN0b3JlXCJcbmltcG9ydCB7IGRiLCBnZXREYiB9IGZyb20gXCIuL2ZpcmViYXNlXCJcblxuLy8gSGVscGVyIHRvIGVuc3VyZSBkYiBpcyBpbml0aWFsaXplZFxuZnVuY3Rpb24gZW5zdXJlRGIoKTogTm9uTnVsbGFibGU8dHlwZW9mIGRiPiB7XG4gIGlmICghZGIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXCJGaXJlc3RvcmUgaXMgbm90IGluaXRpYWxpemVkLiBQbGVhc2UgcmVmcmVzaCB0aGUgcGFnZS5cIilcbiAgfVxuICByZXR1cm4gZGJcbn1cbmltcG9ydCB0eXBlIHtcbiAgVXNlcixcbiAgQ29tcGFueSxcbiAgTUxNQ29uZmlnLFxuICBXYWxsZXQsXG4gIEluY29tZVRyYW5zYWN0aW9uLFxuICBXaXRoZHJhd2FsLFxuICBBdWRpdExvZyxcbiAgQmluYXJ5UG9zaXRpb24sXG4gIFdpdGhkcmF3YWxTZXR0aW5ncyxcbn0gZnJvbSBcIkAvc2hhcmVkL3R5cGVzXCJcblxuLy8gPT09PT09PT09PT09PT09PT09PT0gQ09NUEFOWSBTRVJWSUNFUyA9PT09PT09PT09PT09PT09PT09PVxuZXhwb3J0IGNvbnN0IGNvbXBhbnlTZXJ2aWNlID0ge1xuICBhc3luYyBjcmVhdGUoY29tcGFueTogT21pdDxDb21wYW55LCBcImlkXCIgfCBcImNyZWF0ZWRBdFwiIHwgXCJ1cGRhdGVkQXRcIj4pIHtcbiAgICBjb25zdCBmaXJlc3RvcmUgPSBlbnN1cmVEYigpXG4gICAgY29uc3QgZG9jUmVmID0gZG9jKGNvbGxlY3Rpb24oZmlyZXN0b3JlLCBcImNvbXBhbmllc1wiKSlcbiAgICBjb25zdCB0aW1lc3RhbXAgPSBUaW1lc3RhbXAubm93KClcbiAgICBhd2FpdCBzZXREb2MoZG9jUmVmLCB7XG4gICAgICAuLi5jb21wYW55LFxuICAgICAgY3JlYXRlZEF0OiB0aW1lc3RhbXAsXG4gICAgICB1cGRhdGVkQXQ6IHRpbWVzdGFtcCxcbiAgICB9KVxuICAgIHJldHVybiBkb2NSZWYuaWRcbiAgfSxcblxuICBhc3luYyBnZXRCeUlkKGNvbXBhbnlJZDogc3RyaW5nKSB7XG4gICAgY29uc3QgZmlyZXN0b3JlID0gZW5zdXJlRGIoKVxuICAgIGNvbnN0IGRvY1JlZiA9IGRvYyhmaXJlc3RvcmUsIFwiY29tcGFuaWVzXCIsIGNvbXBhbnlJZClcbiAgICBjb25zdCBkb2NTbmFwID0gYXdhaXQgZ2V0RG9jKGRvY1JlZilcbiAgICByZXR1cm4gZG9jU25hcC5leGlzdHMoKSA/IChkb2NTbmFwLmRhdGEoKSBhcyBDb21wYW55KSA6IG51bGxcbiAgfSxcblxuICBhc3luYyB1cGRhdGUoY29tcGFueUlkOiBzdHJpbmcsIGRhdGE6IFBhcnRpYWw8Q29tcGFueT4pIHtcbiAgICBjb25zdCBmaXJlc3RvcmUgPSBlbnN1cmVEYigpXG4gICAgY29uc3QgZG9jUmVmID0gZG9jKGZpcmVzdG9yZSwgXCJjb21wYW5pZXNcIiwgY29tcGFueUlkKVxuICAgIGF3YWl0IHVwZGF0ZURvYyhkb2NSZWYsIHtcbiAgICAgIC4uLmRhdGEsXG4gICAgICB1cGRhdGVkQXQ6IFRpbWVzdGFtcC5ub3coKSxcbiAgICB9KVxuICB9LFxuXG4gIGFzeW5jIGdldEFsbChmaWx0ZXJzPzogUXVlcnlDb25zdHJhaW50W10pIHtcbiAgICBjb25zdCBmaXJlc3RvcmUgPSBlbnN1cmVEYigpXG4gICAgY29uc3QgYmFzZUZpbHRlcnMgPSBbd2hlcmUoXCJzdGF0dXNcIiwgXCIhPVwiLCBcImRlbGV0ZWRcIildXG4gICAgY29uc3QgY29uc3RyYWludHMgPSBmaWx0ZXJzID8gWy4uLmJhc2VGaWx0ZXJzLCAuLi5maWx0ZXJzXSA6IGJhc2VGaWx0ZXJzXG4gICAgY29uc3QgcSA9IHF1ZXJ5KGNvbGxlY3Rpb24oZmlyZXN0b3JlLCBcImNvbXBhbmllc1wiKSwgLi4uY29uc3RyYWludHMpXG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpXG4gICAgcmV0dXJuIHNuYXBzaG90LmRvY3MubWFwKChkb2MpID0+ICh7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSkgYXMgQ29tcGFueSlcbiAgfSxcblxuICBhc3luYyBnZXRXaXRoQmlsbGluZ0luZm8oY29tcGFueUlkOiBzdHJpbmcpIHtcbiAgICBjb25zdCBjb21wYW55ID0gYXdhaXQgdGhpcy5nZXRCeUlkKGNvbXBhbnlJZClcbiAgICBpZiAoIWNvbXBhbnkpIHJldHVybiBudWxsXG5cbiAgICAvLyBHZXQgYWN0aXZlIHN1YnNjcmlwdGlvblxuICAgIGNvbnN0IGZpcmVzdG9yZSA9IGVuc3VyZURiKClcbiAgICBjb25zdCBxID0gcXVlcnkoXG4gICAgICBjb2xsZWN0aW9uKGZpcmVzdG9yZSwgXCJjb21wYW5pZXNcIiwgY29tcGFueUlkLCBcInN1YnNjcmlwdGlvbnNcIiksXG4gICAgICB3aGVyZShcInN0YXR1c1wiLCBcImluXCIsIFtcImFjdGl2ZVwiLCBcInRyaWFsXCJdKSxcbiAgICAgIG9yZGVyQnkoXCJjcmVhdGVkQXRcIiwgXCJkZXNjXCIpLFxuICAgICAgbGltaXQoMSksXG4gICAgKVxuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKVxuICAgIGNvbnN0IHN1YnNjcmlwdGlvbiA9IHNuYXBzaG90LmVtcHR5ID8gbnVsbCA6IHNuYXBzaG90LmRvY3NbMF0uZGF0YSgpXG5cbiAgICAvLyBHZXQgbGF0ZXN0IGludm9pY2VcbiAgICBjb25zdCBpbnZvaWNlUXVlcnkgPSBxdWVyeShcbiAgICAgIGNvbGxlY3Rpb24oZmlyZXN0b3JlLCBcImNvbXBhbmllc1wiLCBjb21wYW55SWQsIFwiaW52b2ljZXNcIiksXG4gICAgICBvcmRlckJ5KFwiY3JlYXRlZEF0XCIsIFwiZGVzY1wiKSxcbiAgICAgIGxpbWl0KDEpLFxuICAgIClcbiAgICBjb25zdCBpbnZvaWNlU25hcHNob3QgPSBhd2FpdCBnZXREb2NzKGludm9pY2VRdWVyeSlcbiAgICBjb25zdCBsYXRlc3RJbnZvaWNlID0gaW52b2ljZVNuYXBzaG90LmVtcHR5ID8gbnVsbCA6IGludm9pY2VTbmFwc2hvdC5kb2NzWzBdLmRhdGEoKVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbXBhbnksXG4gICAgICBzdWJzY3JpcHRpb24sXG4gICAgICBsYXRlc3RJbnZvaWNlLFxuICAgICAgYmlsbGluZ1N0YXR1czogc3Vic2NyaXB0aW9uPy5zdGF0dXMgPT09IFwiYWN0aXZlXCIgPyBcImFjdGl2ZVwiIDogXCJpbmFjdGl2ZVwiLFxuICAgIH1cbiAgfSxcblxuICBhc3luYyB1cGRhdGVCaWxsaW5nU3RhdHVzKGNvbXBhbnlJZDogc3RyaW5nLCBzdGF0dXM6IHN0cmluZykge1xuICAgIGNvbnN0IGZpcmVzdG9yZSA9IGVuc3VyZURiKClcbiAgICBjb25zdCBkb2NSZWYgPSBkb2MoZmlyZXN0b3JlLCBcImNvbXBhbmllc1wiLCBjb21wYW55SWQpXG4gICAgYXdhaXQgdXBkYXRlRG9jKGRvY1JlZiwge1xuICAgICAgYmlsbGluZ1N0YXR1czogc3RhdHVzLFxuICAgICAgdXBkYXRlZEF0OiBUaW1lc3RhbXAubm93KCksXG4gICAgfSlcbiAgfSxcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT0gVVNFUiBTRVJWSUNFUyA9PT09PT09PT09PT09PT09PT09PVxuZXhwb3J0IGNvbnN0IHVzZXJTZXJ2aWNlID0ge1xuICBhc3luYyBjcmVhdGUoY29tcGFueUlkOiBzdHJpbmcsIHVzZXI6IE9taXQ8VXNlciwgXCJpZFwiIHwgXCJyZWdpc3RyYXRpb25EYXRlXCI+KSB7XG4gICAgY29uc3QgZmlyZXN0b3JlID0gZW5zdXJlRGIoKVxuICAgIGNvbnN0IGRvY1JlZiA9IGRvYyhjb2xsZWN0aW9uKGZpcmVzdG9yZSwgXCJjb21wYW5pZXNcIiwgY29tcGFueUlkLCBcInVzZXJzXCIpKVxuICAgIGF3YWl0IHNldERvYyhkb2NSZWYsIHtcbiAgICAgIC4uLnVzZXIsXG4gICAgICByZWdpc3RyYXRpb25EYXRlOiBUaW1lc3RhbXAubm93KCksXG4gICAgfSlcbiAgICByZXR1cm4gZG9jUmVmLmlkXG4gIH0sXG5cbiAgYXN5bmMgZ2V0QnlJZChjb21wYW55SWQ6IHN0cmluZywgdXNlcklkOiBzdHJpbmcpIHtcbiAgICBjb25zdCBmaXJlc3RvcmUgPSBlbnN1cmVEYigpXG4gICAgLy8gVHJ5IGRpcmVjdCBkb2N1bWVudCBJRCBmaXJzdFxuICAgIGNvbnN0IGRvY1JlZiA9IGRvYyhmaXJlc3RvcmUsIFwiY29tcGFuaWVzXCIsIGNvbXBhbnlJZCwgXCJ1c2Vyc1wiLCB1c2VySWQpXG4gICAgY29uc3QgZG9jU25hcCA9IGF3YWl0IGdldERvYyhkb2NSZWYpXG4gICAgaWYgKGRvY1NuYXAuZXhpc3RzKCkpIHtcbiAgICAgIHJldHVybiB7IGlkOiBkb2NTbmFwLmlkLCAuLi5kb2NTbmFwLmRhdGEoKSB9IGFzIFVzZXJcbiAgICB9XG4gICAgLy8gSWYgbm90IGZvdW5kLCB0cnkgc2VhcmNoaW5nIGJ5IGlkIGZpZWxkXG4gICAgY29uc3QgcSA9IHF1ZXJ5KFxuICAgICAgY29sbGVjdGlvbihmaXJlc3RvcmUsIFwiY29tcGFuaWVzXCIsIGNvbXBhbnlJZCwgXCJ1c2Vyc1wiKSxcbiAgICAgIHdoZXJlKFwiaWRcIiwgXCI9PVwiLCB1c2VySWQpXG4gICAgKVxuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKVxuICAgIGlmICghc25hcHNob3QuZW1wdHkpIHtcbiAgICAgIGNvbnN0IGRvYyA9IHNuYXBzaG90LmRvY3NbMF1cbiAgICAgIHJldHVybiB7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSBhcyBVc2VyXG4gICAgfVxuICAgIHJldHVybiBudWxsXG4gIH0sXG5cbiAgYXN5bmMgZ2V0QnlFbWFpbChjb21wYW55SWQ6IHN0cmluZywgZW1haWw6IHN0cmluZykge1xuICAgIGNvbnN0IGZpcmVzdG9yZSA9IGVuc3VyZURiKClcbiAgICBjb25zdCBxID0gcXVlcnkoY29sbGVjdGlvbihmaXJlc3RvcmUsIFwiY29tcGFuaWVzXCIsIGNvbXBhbnlJZCwgXCJ1c2Vyc1wiKSwgd2hlcmUoXCJlbWFpbFwiLCBcIj09XCIsIGVtYWlsKSlcbiAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSlcbiAgICBpZiAoc25hcHNob3QuZW1wdHkpIHJldHVybiBudWxsXG4gICAgY29uc3QgZG9jID0gc25hcHNob3QuZG9jc1swXVxuICAgIHJldHVybiB7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSBhcyBVc2VyXG4gIH0sXG5cbiAgYXN5bmMgdXBkYXRlKGNvbXBhbnlJZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZywgZGF0YTogUGFydGlhbDxVc2VyPikge1xuICAgIGNvbnN0IGZpcmVzdG9yZSA9IGVuc3VyZURiKClcbiAgICBjb25zdCBkb2NSZWYgPSBkb2MoZmlyZXN0b3JlLCBcImNvbXBhbmllc1wiLCBjb21wYW55SWQsIFwidXNlcnNcIiwgdXNlcklkKVxuICAgIGF3YWl0IHVwZGF0ZURvYyhkb2NSZWYsIGRhdGEpXG4gIH0sXG5cbiAgYXN5bmMgbGlzdEJ5Q29tcGFueShjb21wYW55SWQ6IHN0cmluZywgZmlsdGVycz86IFF1ZXJ5Q29uc3RyYWludFtdKSB7XG4gICAgY29uc3QgZmlyZXN0b3JlID0gZW5zdXJlRGIoKVxuICAgIGNvbnN0IGNvbnN0cmFpbnRzID0gZmlsdGVycyB8fCBbXVxuICAgIC8vIE9ubHkgYWRkIG9yZGVyQnkgaWYgd2UgaGF2ZSBmaWx0ZXJzIHRoYXQgcmVxdWlyZSBpdCwgb3IgaWYgbm8gZmlsdGVycyBleGlzdFxuICAgIC8vIElmIGZpbHRlcnMgaW5jbHVkZSBzcG9uc29ySWQsIHdlIG5lZWQgdGhlIGluZGV4IGZvciBzcG9uc29ySWQgKyByZWdpc3RyYXRpb25EYXRlXG4gICAgY29uc3QgaGFzU3BvbnNvckZpbHRlciA9IGNvbnN0cmFpbnRzLnNvbWUoKGM6IGFueSkgPT4gYyAmJiBjLl9maWVsZFBhdGggPT09ICdzcG9uc29ySWQnKVxuICAgIGNvbnN0IHEgPSBxdWVyeShcbiAgICAgIGNvbGxlY3Rpb24oZmlyZXN0b3JlLCBcImNvbXBhbmllc1wiLCBjb21wYW55SWQsIFwidXNlcnNcIiksXG4gICAgICAuLi5jb25zdHJhaW50cyxcbiAgICAgIC4uLihoYXNTcG9uc29yRmlsdGVyID8gW29yZGVyQnkoXCJyZWdpc3RyYXRpb25EYXRlXCIsIFwiZGVzY1wiKV0gOiBbXSksXG4gICAgKVxuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKVxuICAgIHJldHVybiBzbmFwc2hvdC5kb2NzLm1hcCgoZG9jKSA9PiAoeyBpZDogZG9jLmlkLCAuLi5kb2MuZGF0YSgpIH0pIGFzIFVzZXIpXG4gIH0sXG5cbiAgYXN5bmMgbGlzdEJ5U3RhdHVzKGNvbXBhbnlJZDogc3RyaW5nLCBzdGF0dXM6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLmxpc3RCeUNvbXBhbnkoY29tcGFueUlkLCBbd2hlcmUoXCJzdGF0dXNcIiwgXCI9PVwiLCBzdGF0dXMpXSlcbiAgfSxcblxuICBhc3luYyBnZXRUb3RhbENvdW50KGNvbXBhbnlJZDogc3RyaW5nKSB7XG4gICAgICBpZiAoIWRiKSB0aHJvdyBuZXcgRXJyb3IoXCJGaXJlc3RvcmUgbm90IGluaXRpYWxpemVkXCIpXG4gICAgICBjb25zdCBxID0gcXVlcnkoY29sbGVjdGlvbihkYiwgXCJjb21wYW5pZXNcIiwgY29tcGFueUlkLCBcInVzZXJzXCIpLCB3aGVyZShcInN0YXR1c1wiLCBcIiE9XCIsIFwiZGVsZXRlZFwiKSlcbiAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSlcbiAgICByZXR1cm4gc25hcHNob3Quc2l6ZVxuICB9LFxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PSBVU0VSIFNFVFRJTkdTIFNFUlZJQ0VTID09PT09PT09PT09PT09PT09PT09XG5leHBvcnQgaW50ZXJmYWNlIFVzZXJTZXR0aW5ncyB7XG4gIG5vdGlmaWNhdGlvbnM6IHtcbiAgICBlbWFpbDogYm9vbGVhblxuICAgIHB1c2g6IGJvb2xlYW5cbiAgICBzbXM6IGJvb2xlYW5cbiAgICBpbmNvbWVBbGVydHM6IGJvb2xlYW5cbiAgICB3aXRoZHJhd2FsQWxlcnRzOiBib29sZWFuXG4gICAgdGVhbVVwZGF0ZXM6IGJvb2xlYW5cbiAgfVxuICBzZWN1cml0eToge1xuICAgIHR3b0ZhY3RvckF1dGg6IGJvb2xlYW5cbiAgICBsb2dpbkFsZXJ0czogYm9vbGVhblxuICB9XG4gIHByZWZlcmVuY2VzOiB7XG4gICAgdGhlbWU6IFwibGlnaHRcIiB8IFwiZGFya1wiIHwgXCJzeXN0ZW1cIlxuICAgIGxhbmd1YWdlOiBzdHJpbmdcbiAgICBjdXJyZW5jeTogc3RyaW5nXG4gICAgdGltZXpvbmU6IHN0cmluZ1xuICB9XG4gIHByaXZhY3k6IHtcbiAgICBwcm9maWxlVmlzaWJpbGl0eTogXCJwdWJsaWNcIiB8IFwidGVhbVwiIHwgXCJwcml2YXRlXCJcbiAgICBzaG93RWFybmluZ3M6IGJvb2xlYW5cbiAgICBzaG93VGVhbTogYm9vbGVhblxuICB9XG4gIHVwZGF0ZWRBdD86IERhdGVcbn1cblxuZXhwb3J0IGNvbnN0IHVzZXJTZXR0aW5nc1NlcnZpY2UgPSB7XG4gIGFzeW5jIGdldChjb21wYW55SWQ6IHN0cmluZywgdXNlcklkOiBzdHJpbmcpOiBQcm9taXNlPFVzZXJTZXR0aW5ncyB8IG51bGw+IHtcbiAgICBjb25zdCBmaXJlc3RvcmUgPSBlbnN1cmVEYigpXG4gICAgY29uc3QgZG9jUmVmID0gZG9jKGZpcmVzdG9yZSwgXCJjb21wYW5pZXNcIiwgY29tcGFueUlkLCBcInVzZXJzXCIsIHVzZXJJZCwgXCJzZXR0aW5nc1wiLCBcIm1haW5cIilcbiAgICBjb25zdCBkb2NTbmFwID0gYXdhaXQgZ2V0RG9jKGRvY1JlZilcbiAgICBpZiAoZG9jU25hcC5leGlzdHMoKSkge1xuICAgICAgY29uc3QgZGF0YSA9IGRvY1NuYXAuZGF0YSgpXG4gICAgICByZXR1cm4gZGF0YSBhcyBVc2VyU2V0dGluZ3NcbiAgICB9XG4gICAgcmV0dXJuIG51bGxcbiAgfSxcblxuICBhc3luYyBnZXRPckNyZWF0ZURlZmF1bHQoY29tcGFueUlkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxVc2VyU2V0dGluZ3M+IHtcbiAgICBjb25zdCBleGlzdGluZyA9IGF3YWl0IHRoaXMuZ2V0KGNvbXBhbnlJZCwgdXNlcklkKVxuICAgIGlmIChleGlzdGluZykgcmV0dXJuIGV4aXN0aW5nXG5cbiAgICBjb25zdCBkZWZhdWx0U2V0dGluZ3M6IFVzZXJTZXR0aW5ncyA9IHtcbiAgICAgIG5vdGlmaWNhdGlvbnM6IHtcbiAgICAgICAgZW1haWw6IHRydWUsXG4gICAgICAgIHB1c2g6IHRydWUsXG4gICAgICAgIHNtczogZmFsc2UsXG4gICAgICAgIGluY29tZUFsZXJ0czogdHJ1ZSxcbiAgICAgICAgd2l0aGRyYXdhbEFsZXJ0czogdHJ1ZSxcbiAgICAgICAgdGVhbVVwZGF0ZXM6IHRydWUsXG4gICAgICB9LFxuICAgICAgc2VjdXJpdHk6IHtcbiAgICAgICAgdHdvRmFjdG9yQXV0aDogZmFsc2UsXG4gICAgICAgIGxvZ2luQWxlcnRzOiB0cnVlLFxuICAgICAgfSxcbiAgICAgIHByZWZlcmVuY2VzOiB7XG4gICAgICAgIHRoZW1lOiBcInN5c3RlbVwiLFxuICAgICAgICBsYW5ndWFnZTogXCJlblwiLFxuICAgICAgICBjdXJyZW5jeTogXCJVU0RcIixcbiAgICAgICAgdGltZXpvbmU6IFwiVVRDXCIsXG4gICAgICB9LFxuICAgICAgcHJpdmFjeToge1xuICAgICAgICBwcm9maWxlVmlzaWJpbGl0eTogXCJwdWJsaWNcIixcbiAgICAgICAgc2hvd0Vhcm5pbmdzOiB0cnVlLFxuICAgICAgICBzaG93VGVhbTogdHJ1ZSxcbiAgICAgIH0sXG4gICAgICB1cGRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy51cGRhdGUoY29tcGFueUlkLCB1c2VySWQsIGRlZmF1bHRTZXR0aW5ncylcbiAgICByZXR1cm4gZGVmYXVsdFNldHRpbmdzXG4gIH0sXG5cbiAgYXN5bmMgdXBkYXRlKGNvbXBhbnlJZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZywgc2V0dGluZ3M6IFBhcnRpYWw8VXNlclNldHRpbmdzPikge1xuICAgIGNvbnN0IGZpcmVzdG9yZSA9IGVuc3VyZURiKClcbiAgICBjb25zdCBkb2NSZWYgPSBkb2MoZmlyZXN0b3JlLCBcImNvbXBhbmllc1wiLCBjb21wYW55SWQsIFwidXNlcnNcIiwgdXNlcklkLCBcInNldHRpbmdzXCIsIFwibWFpblwiKVxuICAgIGNvbnN0IGV4aXN0aW5nID0gYXdhaXQgZ2V0RG9jKGRvY1JlZilcbiAgICBcbiAgICBpZiAoZXhpc3RpbmcuZXhpc3RzKCkpIHtcbiAgICAgIGF3YWl0IHVwZGF0ZURvYyhkb2NSZWYsIHtcbiAgICAgICAgLi4uc2V0dGluZ3MsXG4gICAgICAgIHVwZGF0ZWRBdDogVGltZXN0YW1wLm5vdygpLFxuICAgICAgfSlcbiAgICB9IGVsc2Uge1xuICAgICAgYXdhaXQgc2V0RG9jKGRvY1JlZiwge1xuICAgICAgICAuLi5zZXR0aW5ncyxcbiAgICAgICAgdXBkYXRlZEF0OiBUaW1lc3RhbXAubm93KCksXG4gICAgICB9KVxuICAgIH1cbiAgfSxcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT0gQklOQVJZIFRSRUUgU0VSVklDRVMgPT09PT09PT09PT09PT09PT09PT1cbmV4cG9ydCBjb25zdCBiaW5hcnlUcmVlU2VydmljZSA9IHtcbiAgYXN5bmMgZ2V0UG9zaXRpb24oY29tcGFueUlkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxCaW5hcnlQb3NpdGlvbiB8IG51bGw+IHtcbiAgICBjb25zdCBmaXJlc3RvcmUgPSBlbnN1cmVEYigpXG4gICAgY29uc3QgZG9jUmVmID0gZG9jKGZpcmVzdG9yZSwgXCJjb21wYW5pZXNcIiwgY29tcGFueUlkLCBcInVzZXJzXCIsIHVzZXJJZCwgXCJiaW5hcnlUcmVlXCIsIFwicG9zaXRpb25cIilcbiAgICBjb25zdCBkb2NTbmFwID0gYXdhaXQgZ2V0RG9jKGRvY1JlZilcbiAgICByZXR1cm4gZG9jU25hcC5leGlzdHMoKSA/IChkb2NTbmFwLmRhdGEoKSBhcyBCaW5hcnlQb3NpdGlvbikgOiBudWxsXG4gIH0sXG5cbiAgLy8gQWxpYXMgZm9yIGdldFBvc2l0aW9uIChmb3IgY29tcGF0aWJpbGl0eSlcbiAgYXN5bmMgZ2V0QmluYXJ5UG9zaXRpb24oY29tcGFueUlkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxCaW5hcnlQb3NpdGlvbiB8IG51bGw+IHtcbiAgICByZXR1cm4gdGhpcy5nZXRQb3NpdGlvbihjb21wYW55SWQsIHVzZXJJZClcbiAgfSxcblxuICBhc3luYyBzZXRQb3NpdGlvbihjb21wYW55SWQ6IHN0cmluZywgdXNlcklkOiBzdHJpbmcsIHBvc2l0aW9uOiBCaW5hcnlQb3NpdGlvbikge1xuICAgIGNvbnN0IGZpcmVzdG9yZSA9IGVuc3VyZURiKClcbiAgICBjb25zdCBkb2NSZWYgPSBkb2MoZmlyZXN0b3JlLCBcImNvbXBhbmllc1wiLCBjb21wYW55SWQsIFwidXNlcnNcIiwgdXNlcklkLCBcImJpbmFyeVRyZWVcIiwgXCJwb3NpdGlvblwiKVxuICAgIGF3YWl0IHNldERvYyhkb2NSZWYsIHBvc2l0aW9uKVxuICB9LFxuXG4gIGFzeW5jIHVwZGF0ZVZvbHVtZShjb21wYW55SWQ6IHN0cmluZywgdXNlcklkOiBzdHJpbmcsIHNpZGU6IFwibGVmdFwiIHwgXCJyaWdodFwiLCB2b2x1bWU6IG51bWJlcikge1xuICAgIGNvbnN0IGZpcmVzdG9yZSA9IGVuc3VyZURiKClcbiAgICBjb25zdCBkb2NSZWYgPSBkb2MoZmlyZXN0b3JlLCBcImNvbXBhbmllc1wiLCBjb21wYW55SWQsIFwidXNlcnNcIiwgdXNlcklkLCBcImJpbmFyeVRyZWVcIiwgXCJwb3NpdGlvblwiKVxuICAgIGF3YWl0IHVwZGF0ZURvYyhkb2NSZWYsIHtcbiAgICAgIFtgJHtzaWRlfVZvbHVtZWBdOiBpbmNyZW1lbnQodm9sdW1lKSxcbiAgICB9KVxuICB9LFxuXG4gIGFzeW5jIGdldERvd25saW5lKGNvbXBhbnlJZDogc3RyaW5nLCBzcG9uc29ySWQ6IHN0cmluZywgZGVwdGggPSAwLCBtYXhEZXB0aCA9IDEwKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xuICAgIGlmIChkZXB0aCA+IG1heERlcHRoKSByZXR1cm4gW11cblxuICAgIGNvbnN0IHVzZXJzID0gYXdhaXQgdXNlclNlcnZpY2UubGlzdEJ5Q29tcGFueShjb21wYW55SWQsIFt3aGVyZShcInNwb25zb3JJZFwiLCBcIj09XCIsIHNwb25zb3JJZCldKVxuXG4gICAgbGV0IGRvd25saW5lID0gdXNlcnMubWFwKCh1KSA9PiB1LmlkKVxuICAgIGZvciAoY29uc3QgdXNlciBvZiB1c2Vycykge1xuICAgICAgY29uc3Qgc3ViRG93bmxpbmUgPSBhd2FpdCB0aGlzLmdldERvd25saW5lKGNvbXBhbnlJZCwgdXNlci5pZCwgZGVwdGggKyAxLCBtYXhEZXB0aClcbiAgICAgIGRvd25saW5lID0gWy4uLmRvd25saW5lLCAuLi5zdWJEb3dubGluZV1cbiAgICB9XG4gICAgcmV0dXJuIGRvd25saW5lXG4gIH0sXG5cbiAgLy8gR2V0IHRlYW0gY291bnQgKGxlZnQsIHJpZ2h0LCB0b3RhbClcbiAgYXN5bmMgZ2V0VGVhbUNvdW50KGNvbXBhbnlJZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8eyB0b3RhbDogbnVtYmVyOyBsZWZ0OiBudW1iZXI7IHJpZ2h0OiBudW1iZXIgfT4ge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBmaXJlc3RvcmUgPSBlbnN1cmVEYigpXG4gICAgICAvLyBRdWVyeSB3aXRob3V0IG9yZGVyQnkgdG8gYXZvaWQgaW5kZXggcmVxdWlyZW1lbnQgLSB3ZSBqdXN0IG5lZWQgdG8gY291bnRcbiAgICAgIGNvbnN0IHEgPSBxdWVyeShcbiAgICAgICAgY29sbGVjdGlvbihmaXJlc3RvcmUsIFwiY29tcGFuaWVzXCIsIGNvbXBhbnlJZCwgXCJ1c2Vyc1wiKSxcbiAgICAgICAgd2hlcmUoXCJzcG9uc29ySWRcIiwgXCI9PVwiLCB1c2VySWQpXG4gICAgICApXG4gICAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSlcbiAgICAgIFxuICAgICAgbGV0IGxlZnRDb3VudCA9IDBcbiAgICAgIGxldCByaWdodENvdW50ID0gMFxuXG4gICAgICBzbmFwc2hvdC5kb2NzLmZvckVhY2goKGRvY1NuYXApID0+IHtcbiAgICAgICAgY29uc3QgdXNlciA9IGRvY1NuYXAuZGF0YSgpIGFzIFVzZXJcbiAgICAgICAgaWYgKHVzZXIucGxhY2VtZW50U2lkZSA9PT0gXCJsZWZ0XCIpIGxlZnRDb3VudCsrXG4gICAgICAgIGVsc2UgaWYgKHVzZXIucGxhY2VtZW50U2lkZSA9PT0gXCJyaWdodFwiKSByaWdodENvdW50KytcbiAgICAgIH0pXG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvdGFsOiBzbmFwc2hvdC5zaXplLFxuICAgICAgICBsZWZ0OiBsZWZ0Q291bnQsXG4gICAgICAgIHJpZ2h0OiByaWdodENvdW50LFxuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiW3YwXSBFcnJvciBnZXR0aW5nIHRlYW0gY291bnQ6XCIsIGVycm9yKVxuICAgICAgcmV0dXJuIHsgdG90YWw6IDAsIGxlZnQ6IDAsIHJpZ2h0OiAwIH1cbiAgICB9XG4gIH0sXG5cbiAgLy8gQ2FsY3VsYXRlIHRlYW0gdm9sdW1lIHJlY3Vyc2l2ZWx5XG4gIGFzeW5jIGNhbGN1bGF0ZVRlYW1Wb2x1bWUoY29tcGFueUlkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nKTogUHJvbWlzZTxudW1iZXI+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgcG9zaXRpb24gPSBhd2FpdCB0aGlzLmdldFBvc2l0aW9uKGNvbXBhbnlJZCwgdXNlcklkKVxuICAgICAgaWYgKCFwb3NpdGlvbikgcmV0dXJuIDBcblxuICAgICAgbGV0IHZvbHVtZSA9IChwb3NpdGlvbi5sZWZ0Vm9sdW1lIHx8IDApICsgKHBvc2l0aW9uLnJpZ2h0Vm9sdW1lIHx8IDApXG5cbiAgICAgIC8vIFJlY3Vyc2l2ZWx5IGFkZCBjaGlsZHJlbiB2b2x1bWVzXG4gICAgICBpZiAocG9zaXRpb24ubGVmdCkge1xuICAgICAgICB2b2x1bWUgKz0gYXdhaXQgdGhpcy5jYWxjdWxhdGVUZWFtVm9sdW1lKGNvbXBhbnlJZCwgcG9zaXRpb24ubGVmdClcbiAgICAgIH1cbiAgICAgIGlmIChwb3NpdGlvbi5yaWdodCkge1xuICAgICAgICB2b2x1bWUgKz0gYXdhaXQgdGhpcy5jYWxjdWxhdGVUZWFtVm9sdW1lKGNvbXBhbnlJZCwgcG9zaXRpb24ucmlnaHQpXG4gICAgICB9XG5cbiAgICAgIHJldHVybiB2b2x1bWVcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIlt2MF0gRXJyb3IgY2FsY3VsYXRpbmcgdGVhbSB2b2x1bWU6XCIsIGVycm9yKVxuICAgICAgcmV0dXJuIDBcbiAgICB9XG4gIH0sXG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09IFdBTExFVCBTRVJWSUNFUyA9PT09PT09PT09PT09PT09PT09PVxuZXhwb3J0IGNvbnN0IHdhbGxldFNlcnZpY2UgPSB7XG4gIGFzeW5jIGdldE9yQ3JlYXRlKGNvbXBhbnlJZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZyk6IFByb21pc2U8V2FsbGV0PiB7XG4gICAgY29uc3QgZmlyZXN0b3JlID0gZW5zdXJlRGIoKVxuICAgIGNvbnN0IGRvY1JlZiA9IGRvYyhmaXJlc3RvcmUsIFwiY29tcGFuaWVzXCIsIGNvbXBhbnlJZCwgXCJ1c2Vyc1wiLCB1c2VySWQsIFwid2FsbGV0XCIsIFwibWFpblwiKVxuICAgIGNvbnN0IGRvY1NuYXAgPSBhd2FpdCBnZXREb2MoZG9jUmVmKVxuXG4gICAgaWYgKGRvY1NuYXAuZXhpc3RzKCkpIHtcbiAgICAgIHJldHVybiBkb2NTbmFwLmRhdGEoKSBhcyBXYWxsZXRcbiAgICB9XG5cbiAgICBjb25zdCBuZXdXYWxsZXQ6IFdhbGxldCA9IHtcbiAgICAgIHVzZXJJZCxcbiAgICAgIGNvbXBhbnlJZCxcbiAgICAgIGF2YWlsYWJsZUJhbGFuY2U6IDAsXG4gICAgICBsb2NrZWRCYWxhbmNlOiAwLFxuICAgICAgdG90YWxXaXRoZHJhd246IDAsXG4gICAgICB0b3RhbEVhcm5lZDogMCxcbiAgICAgIGxhc3RVcGRhdGVkOiBuZXcgRGF0ZSgpLFxuICAgIH1cblxuICAgIGF3YWl0IHNldERvYyhkb2NSZWYsIG5ld1dhbGxldClcbiAgICByZXR1cm4gbmV3V2FsbGV0XG4gIH0sXG5cbiAgYXN5bmMgZ2V0QmFsYW5jZShjb21wYW55SWQ6IHN0cmluZywgdXNlcklkOiBzdHJpbmcpIHtcbiAgICBjb25zdCB3YWxsZXQgPSBhd2FpdCB0aGlzLmdldE9yQ3JlYXRlKGNvbXBhbnlJZCwgdXNlcklkKVxuICAgIHJldHVybiB7XG4gICAgICBhdmFpbGFibGU6IHdhbGxldC5hdmFpbGFibGVCYWxhbmNlLFxuICAgICAgbG9ja2VkOiB3YWxsZXQubG9ja2VkQmFsYW5jZSxcbiAgICAgIHRvdGFsOiB3YWxsZXQuYXZhaWxhYmxlQmFsYW5jZSArIHdhbGxldC5sb2NrZWRCYWxhbmNlLFxuICAgICAgd2l0aGRyYXduOiB3YWxsZXQudG90YWxXaXRoZHJhd24sXG4gICAgICBlYXJuZWQ6IHdhbGxldC50b3RhbEVhcm5lZCxcbiAgICB9XG4gIH0sXG5cbiAgYXN5bmMgYWRkSW5jb21lKGNvbXBhbnlJZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZywgYW1vdW50OiBudW1iZXIpIHtcbiAgICBjb25zdCBmaXJlc3RvcmUgPSBlbnN1cmVEYigpXG4gICAgY29uc3QgZG9jUmVmID0gZG9jKGZpcmVzdG9yZSwgXCJjb21wYW5pZXNcIiwgY29tcGFueUlkLCBcInVzZXJzXCIsIHVzZXJJZCwgXCJ3YWxsZXRcIiwgXCJtYWluXCIpXG4gICAgYXdhaXQgdXBkYXRlRG9jKGRvY1JlZiwge1xuICAgICAgYXZhaWxhYmxlQmFsYW5jZTogaW5jcmVtZW50KGFtb3VudCksXG4gICAgICB0b3RhbEVhcm5lZDogaW5jcmVtZW50KGFtb3VudCksXG4gICAgICBsYXN0VXBkYXRlZDogVGltZXN0YW1wLm5vdygpLFxuICAgIH0pXG4gIH0sXG5cbiAgYXN5bmMgZGVkdWN0QmFsYW5jZShjb21wYW55SWQ6IHN0cmluZywgdXNlcklkOiBzdHJpbmcsIGFtb3VudDogbnVtYmVyKSB7XG4gICAgY29uc3QgZmlyZXN0b3JlID0gZW5zdXJlRGIoKVxuICAgIGNvbnN0IGRvY1JlZiA9IGRvYyhmaXJlc3RvcmUsIFwiY29tcGFuaWVzXCIsIGNvbXBhbnlJZCwgXCJ1c2Vyc1wiLCB1c2VySWQsIFwid2FsbGV0XCIsIFwibWFpblwiKVxuICAgIGF3YWl0IHVwZGF0ZURvYyhkb2NSZWYsIHtcbiAgICAgIGF2YWlsYWJsZUJhbGFuY2U6IGluY3JlbWVudCgtYW1vdW50KSxcbiAgICAgIGxhc3RVcGRhdGVkOiBUaW1lc3RhbXAubm93KCksXG4gICAgfSlcbiAgfSxcblxuICBhc3luYyByZWNvcmRXaXRoZHJhd2FsKGNvbXBhbnlJZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZywgYW1vdW50OiBudW1iZXIpIHtcbiAgICBjb25zdCBmaXJlc3RvcmUgPSBlbnN1cmVEYigpXG4gICAgY29uc3QgZG9jUmVmID0gZG9jKGZpcmVzdG9yZSwgXCJjb21wYW5pZXNcIiwgY29tcGFueUlkLCBcInVzZXJzXCIsIHVzZXJJZCwgXCJ3YWxsZXRcIiwgXCJtYWluXCIpXG4gICAgYXdhaXQgdXBkYXRlRG9jKGRvY1JlZiwge1xuICAgICAgYXZhaWxhYmxlQmFsYW5jZTogaW5jcmVtZW50KC1hbW91bnQpLFxuICAgICAgdG90YWxXaXRoZHJhd246IGluY3JlbWVudChhbW91bnQpLFxuICAgICAgbGFzdFVwZGF0ZWQ6IFRpbWVzdGFtcC5ub3coKSxcbiAgICB9KVxuICB9LFxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PSBJTkNPTUUgVFJBTlNBQ1RJT04gU0VSVklDRVMgPT09PT09PT09PT09PT09PT09PT1cbmV4cG9ydCBjb25zdCBpbmNvbWVUcmFuc2FjdGlvblNlcnZpY2UgPSB7XG4gIGFzeW5jIGNyZWF0ZShjb21wYW55SWQ6IHN0cmluZywgdHJhbnNhY3Rpb246IE9taXQ8SW5jb21lVHJhbnNhY3Rpb24sIFwiaWRcIiB8IFwiY3JlYXRlZEF0XCI+KSB7XG4gICAgY29uc3QgZmlyZXN0b3JlID0gZW5zdXJlRGIoKVxuICAgIGNvbnN0IGRvY1JlZiA9IGRvYyhjb2xsZWN0aW9uKGZpcmVzdG9yZSwgXCJjb21wYW5pZXNcIiwgY29tcGFueUlkLCBcImluY29tZVRyYW5zYWN0aW9uc1wiKSlcbiAgICBhd2FpdCBzZXREb2MoZG9jUmVmLCB7XG4gICAgICAuLi50cmFuc2FjdGlvbixcbiAgICAgIGNyZWF0ZWRBdDogVGltZXN0YW1wLm5vdygpLFxuICAgIH0pXG4gICAgcmV0dXJuIGRvY1JlZi5pZFxuICB9LFxuXG4gIGFzeW5jIGdldEJ5VXNlcihjb21wYW55SWQ6IHN0cmluZywgdXNlcklkOiBzdHJpbmcsIGxpbWl0Q291bnQgPSAxMDApIHtcbiAgICBjb25zdCBmaXJlc3RvcmUgPSBlbnN1cmVEYigpXG4gICAgY29uc3QgcSA9IHF1ZXJ5KFxuICAgICAgY29sbGVjdGlvbihmaXJlc3RvcmUsIFwiY29tcGFuaWVzXCIsIGNvbXBhbnlJZCwgXCJpbmNvbWVUcmFuc2FjdGlvbnNcIiksXG4gICAgICB3aGVyZShcInVzZXJJZFwiLCBcIj09XCIsIHVzZXJJZCksXG4gICAgICBvcmRlckJ5KFwiY3JlYXRlZEF0XCIsIFwiZGVzY1wiKSxcbiAgICAgIGxpbWl0KGxpbWl0Q291bnQpLFxuICAgIClcbiAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSlcbiAgICByZXR1cm4gc25hcHNob3QuZG9jcy5tYXAoKGRvYykgPT4gKHsgaWQ6IGRvYy5pZCwgLi4uZG9jLmRhdGEoKSB9KSBhcyBJbmNvbWVUcmFuc2FjdGlvbilcbiAgfSxcblxuICBhc3luYyBnZXRCeVR5cGUoY29tcGFueUlkOiBzdHJpbmcsIGluY29tZVR5cGU6IHN0cmluZywgbGltaXRDb3VudCA9IDEwMCkge1xuICAgIGNvbnN0IGZpcmVzdG9yZSA9IGVuc3VyZURiKClcbiAgICBjb25zdCBxID0gcXVlcnkoXG4gICAgICBjb2xsZWN0aW9uKGZpcmVzdG9yZSwgXCJjb21wYW5pZXNcIiwgY29tcGFueUlkLCBcImluY29tZVRyYW5zYWN0aW9uc1wiKSxcbiAgICAgIHdoZXJlKFwiaW5jb21lVHlwZVwiLCBcIj09XCIsIGluY29tZVR5cGUpLFxuICAgICAgb3JkZXJCeShcImNyZWF0ZWRBdFwiLCBcImRlc2NcIiksXG4gICAgICBsaW1pdChsaW1pdENvdW50KSxcbiAgICApXG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpXG4gICAgcmV0dXJuIHNuYXBzaG90LmRvY3MubWFwKChkb2MpID0+ICh7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSkgYXMgSW5jb21lVHJhbnNhY3Rpb24pXG4gIH0sXG5cbiAgYXN5bmMgZ2V0VG90YWxCeVR5cGUoY29tcGFueUlkOiBzdHJpbmcsIHVzZXJJZDogc3RyaW5nLCBpbmNvbWVUeXBlOiBzdHJpbmcpIHtcbiAgICBjb25zdCB0cmFuc2FjdGlvbnMgPSBhd2FpdCB0aGlzLmdldEJ5VXNlcihjb21wYW55SWQsIHVzZXJJZCwgMTAwMClcbiAgICByZXR1cm4gdHJhbnNhY3Rpb25zXG4gICAgICAuZmlsdGVyKCh0KSA9PiB0LmluY29tZVR5cGUgPT09IGluY29tZVR5cGUgJiYgdC5zdGF0dXMgPT09IFwiY3JlZGl0ZWRcIilcbiAgICAgIC5yZWR1Y2UoKHN1bSwgdCkgPT4gc3VtICsgdC5hbW91bnQsIDApXG4gIH0sXG59XG5cbi8vID09PT09PT09PT09PT09PT09PT09IFdJVEhEUkFXQUwgU0VSVklDRVMgPT09PT09PT09PT09PT09PT09PT1cbmV4cG9ydCBjb25zdCB3aXRoZHJhd2FsU2VydmljZSA9IHtcbiAgYXN5bmMgY3JlYXRlKGNvbXBhbnlJZDogc3RyaW5nLCB3aXRoZHJhd2FsOiBPbWl0PFdpdGhkcmF3YWwsIFwiaWRcIiB8IFwicmVxdWVzdGVkQXRcIj4pIHtcbiAgICBjb25zdCBmaXJlc3RvcmUgPSBlbnN1cmVEYigpXG4gICAgY29uc3QgZG9jUmVmID0gZG9jKGNvbGxlY3Rpb24oZmlyZXN0b3JlLCBcImNvbXBhbmllc1wiLCBjb21wYW55SWQsIFwid2l0aGRyYXdhbHNcIikpXG4gICAgYXdhaXQgc2V0RG9jKGRvY1JlZiwge1xuICAgICAgLi4ud2l0aGRyYXdhbCxcbiAgICAgIHJlcXVlc3RlZEF0OiBUaW1lc3RhbXAubm93KCksXG4gICAgfSlcbiAgICByZXR1cm4gZG9jUmVmLmlkXG4gIH0sXG5cbiAgYXN5bmMgZ2V0QnlJZChjb21wYW55SWQ6IHN0cmluZywgd2l0aGRyYXdhbElkOiBzdHJpbmcpIHtcbiAgICBjb25zdCBmaXJlc3RvcmUgPSBlbnN1cmVEYigpXG4gICAgY29uc3QgZG9jUmVmID0gZG9jKGZpcmVzdG9yZSwgXCJjb21wYW5pZXNcIiwgY29tcGFueUlkLCBcIndpdGhkcmF3YWxzXCIsIHdpdGhkcmF3YWxJZClcbiAgICBjb25zdCBkb2NTbmFwID0gYXdhaXQgZ2V0RG9jKGRvY1JlZilcbiAgICByZXR1cm4gZG9jU25hcC5leGlzdHMoKSA/IChkb2NTbmFwLmRhdGEoKSBhcyBXaXRoZHJhd2FsKSA6IG51bGxcbiAgfSxcblxuICBhc3luYyB1cGRhdGUoY29tcGFueUlkOiBzdHJpbmcsIHdpdGhkcmF3YWxJZDogc3RyaW5nLCBkYXRhOiBQYXJ0aWFsPFdpdGhkcmF3YWw+KSB7XG4gICAgY29uc3QgZmlyZXN0b3JlID0gZW5zdXJlRGIoKVxuICAgIGNvbnN0IGRvY1JlZiA9IGRvYyhmaXJlc3RvcmUsIFwiY29tcGFuaWVzXCIsIGNvbXBhbnlJZCwgXCJ3aXRoZHJhd2Fsc1wiLCB3aXRoZHJhd2FsSWQpXG4gICAgYXdhaXQgdXBkYXRlRG9jKGRvY1JlZiwgZGF0YSlcbiAgfSxcblxuICBhc3luYyBsaXN0QnlVc2VyKGNvbXBhbnlJZDogc3RyaW5nLCB1c2VySWQ6IHN0cmluZykge1xuICAgIGNvbnN0IGZpcmVzdG9yZSA9IGVuc3VyZURiKClcbiAgICBjb25zdCBxID0gcXVlcnkoXG4gICAgICBjb2xsZWN0aW9uKGZpcmVzdG9yZSwgXCJjb21wYW5pZXNcIiwgY29tcGFueUlkLCBcIndpdGhkcmF3YWxzXCIpLFxuICAgICAgd2hlcmUoXCJ1c2VySWRcIiwgXCI9PVwiLCB1c2VySWQpLFxuICAgICAgb3JkZXJCeShcInJlcXVlc3RlZEF0XCIsIFwiZGVzY1wiKSxcbiAgICApXG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpXG4gICAgcmV0dXJuIHNuYXBzaG90LmRvY3MubWFwKChkb2MpID0+ICh7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSkgYXMgV2l0aGRyYXdhbClcbiAgfSxcblxuICBhc3luYyBsaXN0QnlTdGF0dXMoY29tcGFueUlkOiBzdHJpbmcsIHN0YXR1czogc3RyaW5nKSB7XG4gICAgY29uc3QgZmlyZXN0b3JlID0gZW5zdXJlRGIoKVxuICAgIGNvbnN0IHEgPSBxdWVyeShcbiAgICAgIGNvbGxlY3Rpb24oZmlyZXN0b3JlLCBcImNvbXBhbmllc1wiLCBjb21wYW55SWQsIFwid2l0aGRyYXdhbHNcIiksXG4gICAgICB3aGVyZShcInN0YXR1c1wiLCBcIj09XCIsIHN0YXR1cyksXG4gICAgICBvcmRlckJ5KFwicmVxdWVzdGVkQXRcIiwgXCJkZXNjXCIpLFxuICAgIClcbiAgICBjb25zdCBzbmFwc2hvdCA9IGF3YWl0IGdldERvY3MocSlcbiAgICByZXR1cm4gc25hcHNob3QuZG9jcy5tYXAoKGRvYykgPT4gKHsgaWQ6IGRvYy5pZCwgLi4uZG9jLmRhdGEoKSB9KSBhcyBXaXRoZHJhd2FsKVxuICB9LFxuXG4gIGFzeW5jIGdldFNldHRpbmdzKGNvbXBhbnlJZDogc3RyaW5nKTogUHJvbWlzZTxXaXRoZHJhd2FsU2V0dGluZ3MgfCBudWxsPiB7XG4gICAgY29uc3QgZmlyZXN0b3JlID0gZW5zdXJlRGIoKVxuICAgIGNvbnN0IGRvY1JlZiA9IGRvYyhmaXJlc3RvcmUsIFwiY29tcGFuaWVzXCIsIGNvbXBhbnlJZCwgXCJzZXR0aW5nc1wiLCBcIndpdGhkcmF3YWxcIilcbiAgICBjb25zdCBkb2NTbmFwID0gYXdhaXQgZ2V0RG9jKGRvY1JlZilcbiAgICByZXR1cm4gZG9jU25hcC5leGlzdHMoKSA/IChkb2NTbmFwLmRhdGEoKSBhcyBXaXRoZHJhd2FsU2V0dGluZ3MpIDogbnVsbFxuICB9LFxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PSBNTE0gQ09ORklHIFNFUlZJQ0VTID09PT09PT09PT09PT09PT09PT09XG5leHBvcnQgY29uc3QgbWxtQ29uZmlnU2VydmljZSA9IHtcbiAgYXN5bmMgZ2V0KGNvbXBhbnlJZDogc3RyaW5nKTogUHJvbWlzZTxNTE1Db25maWcgfCBudWxsPiB7XG4gICAgY29uc3QgZmlyZXN0b3JlID0gZW5zdXJlRGIoKVxuICAgIGNvbnN0IGRvY1JlZiA9IGRvYyhmaXJlc3RvcmUsIFwiY29tcGFuaWVzXCIsIGNvbXBhbnlJZCwgXCJtbG1Db25maWdcIiwgXCJtYWluXCIpXG4gICAgY29uc3QgZG9jU25hcCA9IGF3YWl0IGdldERvYyhkb2NSZWYpXG4gICAgcmV0dXJuIGRvY1NuYXAuZXhpc3RzKCkgPyAoZG9jU25hcC5kYXRhKCkgYXMgTUxNQ29uZmlnKSA6IG51bGxcbiAgfSxcblxuICBhc3luYyBjcmVhdGUoY29tcGFueUlkOiBzdHJpbmcsIGNvbmZpZzogT21pdDxNTE1Db25maWcsIFwiY29tcGFueUlkXCI+KSB7XG4gICAgY29uc3QgZmlyZXN0b3JlID0gZW5zdXJlRGIoKVxuICAgIGNvbnN0IGRvY1JlZiA9IGRvYyhmaXJlc3RvcmUsIFwiY29tcGFuaWVzXCIsIGNvbXBhbnlJZCwgXCJtbG1Db25maWdcIiwgXCJtYWluXCIpXG4gICAgYXdhaXQgc2V0RG9jKGRvY1JlZiwgeyAuLi5jb25maWcsIGNvbXBhbnlJZCB9KVxuICB9LFxuXG4gIGFzeW5jIHVwZGF0ZShjb21wYW55SWQ6IHN0cmluZywgZGF0YTogUGFydGlhbDxNTE1Db25maWc+KSB7XG4gICAgY29uc3QgZmlyZXN0b3JlID0gZW5zdXJlRGIoKVxuICAgIGNvbnN0IGRvY1JlZiA9IGRvYyhmaXJlc3RvcmUsIFwiY29tcGFuaWVzXCIsIGNvbXBhbnlJZCwgXCJtbG1Db25maWdcIiwgXCJtYWluXCIpXG4gICAgYXdhaXQgdXBkYXRlRG9jKGRvY1JlZiwgZGF0YSlcbiAgfSxcbn1cblxuLy8gPT09PT09PT09PT09PT09PT09PT0gQVVESVQgTE9HIFNFUlZJQ0VTID09PT09PT09PT09PT09PT09PT09XG5leHBvcnQgY29uc3QgYXVkaXRMb2dTZXJ2aWNlID0ge1xuICBhc3luYyBsb2coY29tcGFueUlkOiBzdHJpbmcsIGxvZzogT21pdDxBdWRpdExvZywgXCJpZFwiIHwgXCJ0aW1lc3RhbXBcIj4pIHtcbiAgICBjb25zdCBmaXJlc3RvcmUgPSBlbnN1cmVEYigpXG4gICAgY29uc3QgZG9jUmVmID0gZG9jKGNvbGxlY3Rpb24oZmlyZXN0b3JlLCBcImNvbXBhbmllc1wiLCBjb21wYW55SWQsIFwiYXVkaXRMb2dzXCIpKVxuICAgIGF3YWl0IHNldERvYyhkb2NSZWYsIHtcbiAgICAgIC4uLmxvZyxcbiAgICAgIHRpbWVzdGFtcDogVGltZXN0YW1wLm5vdygpLFxuICAgIH0pXG4gIH0sXG5cbiAgYXN5bmMgbGlzdEJ5QWRtaW4oY29tcGFueUlkOiBzdHJpbmcsIGFkbWluSWQ6IHN0cmluZywgbGltaXRDb3VudCA9IDEwMCkge1xuICAgIGNvbnN0IGZpcmVzdG9yZSA9IGVuc3VyZURiKClcbiAgICBjb25zdCBxID0gcXVlcnkoXG4gICAgICBjb2xsZWN0aW9uKGZpcmVzdG9yZSwgXCJjb21wYW5pZXNcIiwgY29tcGFueUlkLCBcImF1ZGl0TG9nc1wiKSxcbiAgICAgIHdoZXJlKFwiYWRtaW5JZFwiLCBcIj09XCIsIGFkbWluSWQpLFxuICAgICAgb3JkZXJCeShcInRpbWVzdGFtcFwiLCBcImRlc2NcIiksXG4gICAgICBsaW1pdChsaW1pdENvdW50KSxcbiAgICApXG4gICAgY29uc3Qgc25hcHNob3QgPSBhd2FpdCBnZXREb2NzKHEpXG4gICAgcmV0dXJuIHNuYXBzaG90LmRvY3MubWFwKChkb2MpID0+ICh7IGlkOiBkb2MuaWQsIC4uLmRvYy5kYXRhKCkgfSkgYXMgQXVkaXRMb2cpXG4gIH0sXG5cbiAgYXN5bmMgbGlzdEFsbChjb21wYW55SWQ6IHN0cmluZywgbGltaXRDb3VudCA9IDEwMCkge1xuICAgIGNvbnN0IGZpcmVzdG9yZSA9IGVuc3VyZURiKClcbiAgICBjb25zdCBxID0gcXVlcnkoXG4gICAgICBjb2xsZWN0aW9uKGZpcmVzdG9yZSwgXCJjb21wYW5pZXNcIiwgY29tcGFueUlkLCBcImF1ZGl0TG9nc1wiKSxcbiAgICAgIG9yZGVyQnkoXCJ0aW1lc3RhbXBcIiwgXCJkZXNjXCIpLFxuICAgICAgbGltaXQobGltaXRDb3VudCksXG4gICAgKVxuICAgIGNvbnN0IHNuYXBzaG90ID0gYXdhaXQgZ2V0RG9jcyhxKVxuICAgIHJldHVybiBzbmFwc2hvdC5kb2NzLm1hcCgoZG9jKSA9PiAoeyBpZDogZG9jLmlkLCAuLi5kb2MuZGF0YSgpIH0pIGFzIEF1ZGl0TG9nKVxuICB9LFxufVxuXG4vLyA9PT09PT09PT09PT09PT09PT09PSBCQVRDSCBPUEVSQVRJT05TID09PT09PT09PT09PT09PT09PT09XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYmF0Y2hVcGRhdGVXYWxsZXRzKFxuICBjb21wYW55SWQ6IHN0cmluZyxcbiAgdXBkYXRlczogQXJyYXk8eyB1c2VySWQ6IHN0cmluZzsgYW1vdW50OiBudW1iZXI7IHR5cGU6IFwiYWRkXCIgfCBcImRlZHVjdFwiIH0+LFxuKSB7XG4gIGNvbnN0IGZpcmVzdG9yZSA9IGVuc3VyZURiKClcbiAgY29uc3QgYmF0Y2hXcml0ZSA9IHdyaXRlQmF0Y2goZmlyZXN0b3JlKVxuXG4gIGZvciAoY29uc3QgdXBkYXRlIG9mIHVwZGF0ZXMpIHtcbiAgICBjb25zdCBkb2NSZWYgPSBkb2MoZmlyZXN0b3JlLCBcImNvbXBhbmllc1wiLCBjb21wYW55SWQsIFwidXNlcnNcIiwgdXBkYXRlLnVzZXJJZCwgXCJ3YWxsZXRcIiwgXCJtYWluXCIpXG4gICAgY29uc3QgaW5jcmVtZW50X3ZhbCA9IHVwZGF0ZS50eXBlID09PSBcImFkZFwiID8gdXBkYXRlLmFtb3VudCA6IC11cGRhdGUuYW1vdW50XG4gICAgYmF0Y2hXcml0ZS51cGRhdGUoZG9jUmVmLCB7XG4gICAgICBhdmFpbGFibGVCYWxhbmNlOiBpbmNyZW1lbnQoaW5jcmVtZW50X3ZhbCksXG4gICAgICBsYXN0VXBkYXRlZDogVGltZXN0YW1wLm5vdygpLFxuICAgIH0pXG4gIH1cblxuICBhd2FpdCBiYXRjaFdyaXRlLmNvbW1pdCgpXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBiYXRjaENyZWF0ZVRyYW5zYWN0aW9ucyhcbiAgY29tcGFueUlkOiBzdHJpbmcsXG4gIHRyYW5zYWN0aW9uczogQXJyYXk8T21pdDxJbmNvbWVUcmFuc2FjdGlvbiwgXCJpZFwiIHwgXCJjcmVhdGVkQXRcIj4+LFxuKSB7XG4gIGNvbnN0IGZpcmVzdG9yZSA9IGVuc3VyZURiKClcbiAgY29uc3QgYmF0Y2hXcml0ZSA9IHdyaXRlQmF0Y2goZmlyZXN0b3JlKVxuXG4gIGZvciAoY29uc3QgdHJhbnNhY3Rpb24gb2YgdHJhbnNhY3Rpb25zKSB7XG4gICAgY29uc3QgZG9jUmVmID0gZG9jKGNvbGxlY3Rpb24oZmlyZXN0b3JlLCBcImNvbXBhbmllc1wiLCBjb21wYW55SWQsIFwiaW5jb21lVHJhbnNhY3Rpb25zXCIpKVxuICAgIGJhdGNoV3JpdGUuc2V0KGRvY1JlZiwge1xuICAgICAgLi4udHJhbnNhY3Rpb24sXG4gICAgICBjcmVhdGVkQXQ6IFRpbWVzdGFtcC5ub3coKSxcbiAgICB9KVxuICB9XG5cbiAgYXdhaXQgYmF0Y2hXcml0ZS5jb21taXQoKVxufVxuIl0sIm5hbWVzIjpbImNvbGxlY3Rpb24iLCJkb2MiLCJnZXREb2MiLCJnZXREb2NzIiwic2V0RG9jIiwidXBkYXRlRG9jIiwicXVlcnkiLCJ3aGVyZSIsIm9yZGVyQnkiLCJsaW1pdCIsIndyaXRlQmF0Y2giLCJUaW1lc3RhbXAiLCJpbmNyZW1lbnQiLCJkYiIsImVuc3VyZURiIiwiRXJyb3IiLCJjb21wYW55U2VydmljZSIsImNyZWF0ZSIsImNvbXBhbnkiLCJmaXJlc3RvcmUiLCJkb2NSZWYiLCJ0aW1lc3RhbXAiLCJub3ciLCJjcmVhdGVkQXQiLCJ1cGRhdGVkQXQiLCJpZCIsImdldEJ5SWQiLCJjb21wYW55SWQiLCJkb2NTbmFwIiwiZXhpc3RzIiwiZGF0YSIsInVwZGF0ZSIsImdldEFsbCIsImZpbHRlcnMiLCJiYXNlRmlsdGVycyIsImNvbnN0cmFpbnRzIiwicSIsInNuYXBzaG90IiwiZG9jcyIsIm1hcCIsImdldFdpdGhCaWxsaW5nSW5mbyIsInN1YnNjcmlwdGlvbiIsImVtcHR5IiwiaW52b2ljZVF1ZXJ5IiwiaW52b2ljZVNuYXBzaG90IiwibGF0ZXN0SW52b2ljZSIsImJpbGxpbmdTdGF0dXMiLCJzdGF0dXMiLCJ1cGRhdGVCaWxsaW5nU3RhdHVzIiwidXNlclNlcnZpY2UiLCJ1c2VyIiwicmVnaXN0cmF0aW9uRGF0ZSIsInVzZXJJZCIsImdldEJ5RW1haWwiLCJlbWFpbCIsImxpc3RCeUNvbXBhbnkiLCJoYXNTcG9uc29yRmlsdGVyIiwic29tZSIsImMiLCJfZmllbGRQYXRoIiwibGlzdEJ5U3RhdHVzIiwiZ2V0VG90YWxDb3VudCIsInNpemUiLCJ1c2VyU2V0dGluZ3NTZXJ2aWNlIiwiZ2V0IiwiZ2V0T3JDcmVhdGVEZWZhdWx0IiwiZXhpc3RpbmciLCJkZWZhdWx0U2V0dGluZ3MiLCJub3RpZmljYXRpb25zIiwicHVzaCIsInNtcyIsImluY29tZUFsZXJ0cyIsIndpdGhkcmF3YWxBbGVydHMiLCJ0ZWFtVXBkYXRlcyIsInNlY3VyaXR5IiwidHdvRmFjdG9yQXV0aCIsImxvZ2luQWxlcnRzIiwicHJlZmVyZW5jZXMiLCJ0aGVtZSIsImxhbmd1YWdlIiwiY3VycmVuY3kiLCJ0aW1lem9uZSIsInByaXZhY3kiLCJwcm9maWxlVmlzaWJpbGl0eSIsInNob3dFYXJuaW5ncyIsInNob3dUZWFtIiwiRGF0ZSIsInNldHRpbmdzIiwiYmluYXJ5VHJlZVNlcnZpY2UiLCJnZXRQb3NpdGlvbiIsImdldEJpbmFyeVBvc2l0aW9uIiwic2V0UG9zaXRpb24iLCJwb3NpdGlvbiIsInVwZGF0ZVZvbHVtZSIsInNpZGUiLCJ2b2x1bWUiLCJnZXREb3dubGluZSIsInNwb25zb3JJZCIsImRlcHRoIiwibWF4RGVwdGgiLCJ1c2VycyIsImRvd25saW5lIiwidSIsInN1YkRvd25saW5lIiwiZ2V0VGVhbUNvdW50IiwibGVmdENvdW50IiwicmlnaHRDb3VudCIsImZvckVhY2giLCJwbGFjZW1lbnRTaWRlIiwidG90YWwiLCJsZWZ0IiwicmlnaHQiLCJlcnJvciIsImNvbnNvbGUiLCJjYWxjdWxhdGVUZWFtVm9sdW1lIiwibGVmdFZvbHVtZSIsInJpZ2h0Vm9sdW1lIiwid2FsbGV0U2VydmljZSIsImdldE9yQ3JlYXRlIiwibmV3V2FsbGV0IiwiYXZhaWxhYmxlQmFsYW5jZSIsImxvY2tlZEJhbGFuY2UiLCJ0b3RhbFdpdGhkcmF3biIsInRvdGFsRWFybmVkIiwibGFzdFVwZGF0ZWQiLCJnZXRCYWxhbmNlIiwid2FsbGV0IiwiYXZhaWxhYmxlIiwibG9ja2VkIiwid2l0aGRyYXduIiwiZWFybmVkIiwiYWRkSW5jb21lIiwiYW1vdW50IiwiZGVkdWN0QmFsYW5jZSIsInJlY29yZFdpdGhkcmF3YWwiLCJpbmNvbWVUcmFuc2FjdGlvblNlcnZpY2UiLCJ0cmFuc2FjdGlvbiIsImdldEJ5VXNlciIsImxpbWl0Q291bnQiLCJnZXRCeVR5cGUiLCJpbmNvbWVUeXBlIiwiZ2V0VG90YWxCeVR5cGUiLCJ0cmFuc2FjdGlvbnMiLCJmaWx0ZXIiLCJ0IiwicmVkdWNlIiwic3VtIiwid2l0aGRyYXdhbFNlcnZpY2UiLCJ3aXRoZHJhd2FsIiwicmVxdWVzdGVkQXQiLCJ3aXRoZHJhd2FsSWQiLCJsaXN0QnlVc2VyIiwiZ2V0U2V0dGluZ3MiLCJtbG1Db25maWdTZXJ2aWNlIiwiY29uZmlnIiwiYXVkaXRMb2dTZXJ2aWNlIiwibG9nIiwibGlzdEJ5QWRtaW4iLCJhZG1pbklkIiwibGlzdEFsbCIsImJhdGNoVXBkYXRlV2FsbGV0cyIsInVwZGF0ZXMiLCJiYXRjaFdyaXRlIiwiaW5jcmVtZW50X3ZhbCIsInR5cGUiLCJjb21taXQiLCJiYXRjaENyZWF0ZVRyYW5zYWN0aW9ucyIsInNldCJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/lib/firebase-services.ts\n"));

/***/ })

});